  <app-header></app-header>
    <div class="main-layout">
        <!-- Sidebar -->
        <nav class="sidebar">
            <ul>
                <li><a href="/home">Početna stranica</a></li>
                <li><a href="/assigned">Moje utakmice</a></li>
                <li><a class="active" href="/absence">Odsustvo</a></li>
                <li><a href="/expenses">Putni troškovi</a></li>
                <li><a href="/rules">Dokumenti</a></li>
                <li><a href="#">Ispiti</a></li>
                <li><a href="#">Upute za korištenje sustava</a></li>
            </ul>
        </nav>
        <!-- Content -->
        <section class="content">
            <div class="page-header">
                <h2>Odsustvo</h2>
                <div class="page-actions">
                    <button class="btn btn-primary" (click)="openModal()">Kreiraj</button>
                </div>
            </div>
            <div class="alert alert-success">
                <i class="icon-message"></i>
                <strong>Message:</strong> Možete odrediti s izuzetkom radnog vremena kada ne možete biti sudac.
                Neće vam biti dodijeljene utakmice za ta razdoblja.
            </div>
            <div class="filter-section">
                <div class="filter-row">
                    <div class="filter-group">
                        <label>ID</label>
                        <input type="text" class="form-control" placeholder="">
                    </div>
                    <div class="filter-group">
                        <label>Početak odsudstva</label>
                        <input type="text" class="form-control" placeholder="">
                    </div>
                    <div class="filter-group">
                        <label>Kraj odsudstva</label>
                        <input type="text" class="form-control" placeholder="">
                    </div>
                    <div class="filter-group">
                        <button class="btn btn-primary filter-btn">Filtriraj</button>
                    </div>
                </div>
            </div>
            <div class="table-info">
                <span>Ukupno unosa: {{ absences.length }}</span>
            </div>
            <div class="table-container" *ngIf="!isLoading">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Početak odsudstva</th>
                            <th>Kraj odsutstva</th>
                            <th>Razlog</th>
                            <th>Opcije</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let absence of absences">
                            <td>{{ absence.id }}</td>
                            <td>{{ formatDate(absence.startDate) }}</td>
                            <td>{{ formatDate(absence.endDate) }}</td>
                            <td>{{ absence.reason || '-' }}</td>
                            <td>
                                <div class="action-buttons">
                                    <div class="btn-icon btn-edit" (click)="openEditModal(absence)"><i class="fa-solid fa-pen"></i></div>
                                    <div class="btn-icon btn-info" (click)="openDeleteModal(absence)"> <i class="fas fa-trash"></i></div>
                                </div>
                            </td>
                        </tr>
                        <tr *ngIf="absences.length === 0">
                            <td colspan="5" class="no-data">Nema unesenih podataka</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="loading-container" *ngIf="isLoading">
                <div class="loading-spinner">Učitavanje...</div>
            </div>
        </section>
    </div>
    <app-footer></app-footer>

    <!-- Modal -->
    <app-time-absent-modal 
      [isOpen]="isModalOpen" 
      (closeModalEvent)="closeModal()"
      (absenceSaved)="onAbsenceSaved()">
    </app-time-absent-modal>

     <app-delete-time-absent-modal
      [isOpen]="isDeleteModalOpen"
      [absenceToDelete]="absenceToDelete"
      (closeModalEvent)="closeDeleteModal()"
      (absenceDeleted)="onAbsenceDeleted()">
    </app-delete-time-absent-modal>

     <app-edit-time-absent-modal
      [isOpen]="isEditModalOpen"
      [absenceToEdit]="absenceToEdit"
      (closeModalEvent)="closeEditModal()"
      (absenceUpdated)="onAbsenceUpdated()">
    </app-edit-time-absent-modal>