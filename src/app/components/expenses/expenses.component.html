<!-- expenses.component.html -->
<app-header></app-header>
<div class="main-layout">
    <!-- Sidebar -->
    <nav class="sidebar">
        <ul>
            <li><a href="/home">Početna stranica</a></li>
            <li><a href="/assigned">Moje utakmice</a></li>
            <li><a href="/absence">Odsustvo</a></li>
            <li><a class="active" href="/expenses">Putni troškovi</a></li>
            <li><a href="/rules">Dokumenti</a></li>
            <li><a href="#">Ispiti</a></li>
            <li><a href="#">Upute za korištenje sustava</a></li>
        </ul>
    </nav>
    <section class="content">
        <div class="page-header">
            <h2>Putni troškovi</h2>
            <div class="page-actions">
                <button 
                    class="btn btn-primary" 
                    (click)="openModal()">
                    Kreiraj
                </button>
            </div>
        </div>
        <div class="filter-section">
            <div class="filter-row">
                <div class="filter-group">
                    <label>ID</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="filter-group">
                    <label>Vrsta</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="filter-group">
                    <label>Godina</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="filter-group">
                    <label>Mjesec</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="filter-group">
                    <label>Status</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="filter-group">
                    <button class="btn btn-primary filter-btn">Filtriraj</button>
                </div>
            </div>
        </div>
        <div class="table-info">
            <span>Ukupno unosa: {{ travelExpenses.length }}</span>
        </div>
        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Vrsta</th>
                        <th>Korisnik</th>
                        <th>Godina</th>
                        <th>Mjesec</th>
                        <th>Status</th>
                        <th>Opcije</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let expense of travelExpenses; trackBy: trackByExpenseId">
                        <td>{{ expense.id }}</td>
                        <td>{{ expense.type }}</td>
                        <td>{{ expense.userName }} {{ expense.userSurname }}</td>
                        <td>{{ expense.year }}</td>
                        <td>{{ expense.month }}</td>
                        <td>{{ expense.state }}</td>
                        <td>
                            <div class="action-buttons">
                                <div class="btn-icon btn-edit" title="Uredi"
                                (click)="editTravelExpense(expense)"><i class="fa-solid fa-pen"></i></div>
                                <div 
                                    class="btn-icon btn-info" 
                                    title="Obriši"
                                    (click)="openDeleteModal(expense)"> <i class="fas fa-trash"></i></div>
                            </div>
                        </td>
                    </tr>
                    <tr *ngIf="travelExpenses.length === 0">
                        <td colspan="7" class="text-center">Nema podataka za prikaz</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>

<!-- Modal Component -->
<app-expenses-modal 
  [isOpen]="isModalOpen"
  (close)="closeModal()"
  (success)="onReportCreated($event)">
</app-expenses-modal>

<app-delete-expenses-modal 
  [isOpen]="isDeleteModalOpen"
  [expenseToDelete]="expenseToDelete"
  (close)="closeDeleteModal()"
  (deleteConfirmed)="onDeleteConfirmed($event)">
</app-delete-expenses-modal>

<div class="toast-container">
  <div *ngIf="successMessage" class="toast toast-success">
    <span class="toast-emoji">✅</span>
    <span class="toast-message">{{ successMessage }}</span>
    <button class="toast-close" (click)="clearMessages()"><i class="fa-solid fa-xmark"></i></button>
  </div>
  
  <div *ngIf="errorMessage" class="toast toast-error">
    <span class="toast-emoji">❌</span>
    <span class="toast-message">{{ errorMessage }}</span>
    <button class="toast-close" (click)="clearMessages()"><i class="fa-solid fa-xmark"></i></button>
  </div>
</div>

<app-footer></app-footer>